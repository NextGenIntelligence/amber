;
; rowl - generation 1
; Copyright (C) 2010 nineties
;
; $Id: vm-prim.rlc 2010-06-22 18:09:52 nineties $
;

; primitive functions

(define assign_indices (table) (do
    (var idx 0)
    (map (lambda (ent) (do
        (incl idx)
        `(@(car ent) @(- idx 1) @(cdr ent))
        )) table)
    ))

(var prim_table (assign_indices `(
    (hello . prim_hello)
    )))

(var vm-prim-code `(

; test code
(fun prim_hello () (
    (syscall 4 1 "Hello World\n" 12)
    ))
))

