# $Id: bigint.ab 2013-07-08 19:40:03 nineties $

import unittest

BigInt::enable()

test "BigInt module" {
    # randomly generated 100 tests for each operation
    "equality" : {
        -146462013895870690514178493312069741777376121006229319590177941128673851 == -146462013895870690514178493312069741777376121006229319590177941128673851
            and -335071946971618720061907303827556360866327899024037066287324258795892805817019050632779211 == -335071946971618720061907303827556360866327899024037066287324258795892805817019050632779211
            and -49 == -49
            and 9219599111142793271227125960968657079138353247788005732192858066763355323966100286108800841736574 == 9219599111142793271227125960968657079138353247788005732192858066763355323966100286108800841736574
            and 517839688295861183724022596055241820733450067853063151176532578689038683882403091829692572951717 == 517839688295861183724022596055241820733450067853063151176532578689038683882403091829692572951717
            and -521947661823364808209 == -521947661823364808209
            and 803604446306420525907265787279651506015831664527269873267882518036086 == 803604446306420525907265787279651506015831664527269873267882518036086
            and -7160591481779737915277547137379503753586737030360666574953706881413462083955734598717141 == -7160591481779737915277547137379503753586737030360666574953706881413462083955734598717141
            and 205325586023759750148139621425562427123427677007395810581094475851930932807975384765780632680761 == 205325586023759750148139621425562427123427677007395810581094475851930932807975384765780632680761
            and 4944203594478616893707396482017400 == 4944203594478616893707396482017400
    }
    "inequality": {
        91784925734517781569998016153988142037928722608600 != 916479414176905655370436924684476466566439260136479726110125360014641777111
            and -485917756778961 != 740451571813414106625357418768904842950573524188762449
            and -2860159 != -726289802376646211789098104943131739090386649801084200365737440479681412623108965975158
            and 389080866882840827588242 != 88552333958
            and 8960287591685608712029877544206328233895522953580843897856960439747156812617881521 != -148792334853044958560606491316
            and -9030476158599546489 != -929231348429390454633647789683342
            and -9370743496 != -61366241427657
            and 98745707142946321974123538 != -504106316316030096991205645249801244467932351703066158778
            and -2235020947997579703083854042645827446222577479265646858602012847366103008 != -5058467779878011874271277214687779153
            and -5898007493973351423712132911500499 != 3288584410648817296110619616116343770899867411629612521085890449118
    }

    "comparison": {
        342380520193646527294 >= -75237319865210216331039626820215885873038717714406473715624901300446230902575
            and -1754954 >= -88858442191853072682096
            and -66894 < 14794332626741130211217159618615148244076907454493555
            and -528431841742617424342272743975561064691461541784310620348124 < 8329051752795289759297162314227217583832388871796010984
            and -2109413922510379860575439202838477552976278589898922059150411313107539337538073994961329647 <= 7603881848906183697894454940820505308032262222372460912361949311333916735235124504922
            and -1473944409329407771858541073662177704 < 704337511191796657405936923380789481075787327641533898236754971671550453145366082
            and -79033238250288053891048521306812496714757841744381753974251460144101439408948988183767812221713 < -1759548842570236422089493
            and 658423727680029760483709561 >= 9297188768760209527487706
            and -44369958064967 < 375744136748659177493819815161948118896018808131625763939056187424545221011374815842285123918390
            and 90147 <= 132394378851914303442530860256754707012866400867183500103078351414413902277457973695
    }

    "string -> bigint": {
        "-35639440557645620178381014614680642159178985524735".to_i == -35639440557645620178381014614680642159178985524735
            and "-690854413744784621725842909828882219288613170299498".to_i == -690854413744784621725842909828882219288613170299498
            and "-461034247441768401859479797301894654863294117041".to_i == -461034247441768401859479797301894654863294117041
            and "149857731018404791480343851728377982638704893466763791901".to_i == 149857731018404791480343851728377982638704893466763791901
            and "-3758473566679124534981850004871224786986762394451993828452226964014178".to_i == -3758473566679124534981850004871224786986762394451993828452226964014178
            and "75482302798486587012613791893669599159965962464602874".to_i == 75482302798486587012613791893669599159965962464602874
            and "-91720221829126819919437335459305778015952400529976180240858270118374397849310545015303541174".to_i == -91720221829126819919437335459305778015952400529976180240858270118374397849310545015303541174
            and "431839620309234854024810099018515449705048944809941".to_i == 431839620309234854024810099018515449705048944809941
            and "348986231152614255795810095110991783625219480968144596069".to_i == 348986231152614255795810095110991783625219480968144596069
            and "31631455128909136480052328".to_i == 31631455128909136480052328
    }

    "integer -> string": {
        511319492414543993472539837346075272535515160177341416849036187852.to_s == "511319492414543993472539837346075272535515160177341416849036187852"
            and (-87).to_s == "-87"
            and 99684636601363871556604307362011414699370373060543629035462600253712619242797568349055942917695509.to_s == "99684636601363871556604307362011414699370373060543629035462600253712619242797568349055942917695509"
            and (-7225861280304557542953609626745005269576185).to_s == "-7225861280304557542953609626745005269576185"
            and (-8763691026951649421710386504807034262340591406657620401162768969134987043199227373658809606748461544).to_s == "-8763691026951649421710386504807034262340591406657620401162768969134987043199227373658809606748461544"
            and 6000008309900249025.to_s == "6000008309900249025"
            and (-6550353906444656646089863571374746280235234220352).to_s == "-6550353906444656646089863571374746280235234220352"
            and (-49375149363473448225369419893677525668499509584598311556194625959183485883864936056).to_s == "-49375149363473448225369419893677525668499509584598311556194625959183485883864936056"
            and 13377597126175985310858670209426585422489516432993529008830258714509271498004576080.to_s == "13377597126175985310858670209426585422489516432993529008830258714509271498004576080"
            and (-961845535843331).to_s == "-961845535843331"
    }

    "negation": {
        -51782407634914007588008185719745196 == -51782407634914007588008185719745196
            and -(-36684198444661515236685889) == 36684198444661515236685889
            and -(-8964369238) == 8964369238
            and -(-878840350475921) == 878840350475921
            and -844955787997412275201906385905041849901 == -844955787997412275201906385905041849901
            and -47560914386223230531168274999263 == -47560914386223230531168274999263
            and -605028626058495938 == -605028626058495938
            and -(-48963465464902828265345181085677121460152803528138423672195) == 48963465464902828265345181085677121460152803528138423672195
            and -(-72447419674129573010379390881219076377682673165924)== 72447419674129573010379390881219076377682673165924
            and -(-723489549512598910375) == 723489549512598910375
    }

    "addition": {
        77366344678073473303523870422533344863189023509558342626974 + -12656290970004092624755148182197271088598 == 77366344678073473290867579452529252238433875327361071538376
            and 415752114219918301697452790860552 + 709022570030817450597162537716241229568200310752779 == 709022570030817451012914651936159531265653101613331
            and 78264085785091596065325670646509932856289524867473182902541473878601207653606904106603863 + -15868377334121 == 78264085785091596065325670646509932856289524867473182902541473878601207653591035729269742
            and -4937340792839753053061023441994617007216962026552242286113323793711875643152355622074818686165 + -11774192914928383392027113009778990527974578865651901974570671436781373315984623430036 == -4937340804613945967989406834021730016995952554526821151765225768282547079933728938059442116201
            and 3762081625096145397406812571262430476373516355747949141845736751396 + 826907151297503324076757834484 == 3762081625096145397406812571262430477200423507045452465922494585880
            and 82511298532793097399904843159392459127041527761362 + -2431846851595462068395676530571570887137158874737498512701595588302803457844 == -2431846851595462068395676448060272354344061474832655353309136461261275696482
            and -322528836512519268732082198468575079195318102231452228271889962223805716968742515 + -459022039652556438124375847744807361169516 == -322528836512519268732082198468575079195777124271104784710014338071550524329912031
            and -5249834728 + -8313965033939487084978573773869625121710372972727053518100154220557902552316 == -8313965033939487084978573773869625121710372972727053518100154220563152387044
            and -149667563659171122696632322918272500446163251317331693410513882 + 89691034400375796348655853479433827167267872713571035515704095684861061043537948864790611929151654 == 89691034400375796348655853479433827017600309054399912819071772766588560597374697547458918518637772
            and -625563411238247303585703863020732805660315503269926799623631 + 97947328736475544968765094497600140979693715408904204847837788654992816911027402966021113746995 == 97947328736475544968765094497600140354130304170656901262133925634260011250711899696094314123364
    }

    "subtraction": {
        -69937565558153568010793746836817947770159918863842612587398847102541726081539797461570350920830997 - -1787215834515 == -69937565558153568010793746836817947770159918863842612587398847102541726081539797461568563704996482
            and 747998977297982770078162939533253214259386351354503649752349135 - 19871603285 == 747998977297982770078162939533253214259386351354503629880745850
            and 58540237009215902954182014759683539 - -676761886724490 == 58540237009215902954858776646408029
            and -48329232033863216506847402308305388576577146703796533118454350418490075847 - -9012817533530696031615802261358617053597679184682739754997578323 == -48329232024850398973316706276689586315218529650198853933771610663492497524
            and 61996614010327507 - 9035944336 == 61996604974383171
            and -3313538074075924113 - -5533222411143766873630235638692436073812343520818999513940 == 5533222411143766873630235638692436073809029982744923589827
            and -19492355208556954973494443888568927301169784761674618 - 109270073106521197974170538771925115189701723348952500328549704109165394405598682963472498062 == -109270073106521197974170538771925115189721215704161057283523198553053963332899852748234172680
            and -9836208801785 - 695959099384750247187926194791495458997889813542 == -695959099384750247187926194791495468834098615327
            and 1279886965421722259508479001928211230684921551289713332078123262048447702211271694737504679491 - 1204835740737370485349885023518484685818020558762968724088149752653577329330324494126303568014 == 75051224684351774158593978409726544866900992526744607989973509394870372880947200611201111477
            and 7 - 220429128687766421379996832917177467491790495 == -220429128687766421379996832917177467491790488
    }

    "multiplication": {
        113373011939189103986661831691857656019972125735350880223294336453092068783756 * 2341377913 == 265449066084702667204630259323438937745114222072409434259929867469260530405763071581228
            and 84615122075161090820498 * -8062281145517047340203128850793133273865681781307824 == -682190903332194559169658699497295063108450152735616268531009847567666976352
            and 194308891050519853714222527871872341861494291358931860384246814352174241818210495 * 342985378619569215928299927125593710669175025944761537096303799950896585701118123785916 == 66645108566111176398745358207937864828012105145793547931298430843517484837712574141222646377052537074931763039596809660916356532528104153142640247594795906101604388420
            and 4180197894946381940584090236108193050994711420317737983302551253874943154567252499307440443773742051 * 27120603865343122 == 113369491187582027887680870479121717226967228056472291649974739892508117535743998780229703934734831433812161035023222
            and -88558404020639437948389203366 * -8200411218614128279115772054589099360226228498 == 726215329833414170747620295204002297349247705592127747544448736756906724268
            and -27184826961424401586373694263427049586825751 * 32441094674 == -881905545151876757757344803942967611338706771332150174
            and 928159139727131626974539850789585718318467589075419634706411651058729448 * 531904561794984975624441176405695 == 493692080492570178906684405906211898236890345589002854294396626386614968952359556579476136351222091406360
            and -493109734924789858 * -51125029901090377363779730133461400610952354255627 == 25210249942548631434288168088119206727936242613149738910044989030966
            and 521030515243869486604176062576880291 * -293632146406470423941 == -152991308534326605112875763037553114448063162787977446831
            and 7907546851876277010631924133284885151232499 * 660102106490040033333655959720536016729669976567165042836425907261122812361 == 5219788334092215029038414543318669305511344734425928983675751932195106489481254529486477526602569763854311944262120139
    }

    "division (quotient)": {
        24897478291676317216787111145198491420390899563074752980488613465885162760828585970596377597 / -902876893350450820514853604531924008 == -27575717658788709677365361478845454668306143994334247243
            and 508246821232470952506890086007725700046390622105441425719233215156464 / -327457904978305863267983872372998 == -1552098188822598076649644828194644201
            and 9895249618027030922597063625047350420550312817255 / -428061314608434712397604195231811740378217442 == -23117
            and 93399058045656867841771903191483 / -458617994616611929589 == -203653278202
            and 8615942478394789652364069251245689132124847570922768968792308093383646918692040654069901902659239665 / 792821681088433318162777220514321391503112684 == 10867440540433134074996218831430459281245747011902333944
            and 3057256133686300263792899918790214665015377982892659424030034197088847092253488931669655754733782 / -9775426002414628186991787521585433591605494589639591400996875385775468550087 == -312749145963677425464
            and -72265583548354527608158230212067948995850016256399058108401136566099215759021073744133814091 / 90687356949250103056697887154870583246781312397267878040782190715464176176793 == -796865031459627
            and -115698383476384799388769046182259823746373606880820671565946644697 / 12747382470796357463063929586317203521 == -9076246338528262805036507153
            and 83539430493726553575159793769984077183218070351609567 / 44187451846464999509955943228260 == 1890569086988656401197
            and -556963210551989155247160673139768620398635198504377537238501771985902320396931733 / 10054136565850 == -55396423840489399099657513345608682216548728430795003635633033486215
    }

    "division (remainder)": {
        91521834454610235792028861945932489336 % 603964675621071 == 47468047636395
            and 5374179745346904565893816137004391958904965039879759092726 % 5637290928512 == 3575532497782
            and -53780033474 % 348068 == 301274
            and -95572585696238755771082455298640706799472917669852735865767568823781411596946772841709290230474440 % 691441078288646809192295 == 203800583409372534965110
            and 2817973540652807784713031002878014892587711758547267545391452500838028449 % -83017474193330225356971552106 == -65862394930199070501449706971
            and 40204877355905446087792962615891828499686649529935230808842824037571677 % 491859764722033592096123819406419436692747441269561 == 283860920158462566010801840272489249671833625885044
            and 55213728916661152351478282619130451929883592265260838638688868292135237386592 % -414501412720616279172 == -319998677816312679336
            and -84438791015592945164611440002986079831062835229326828256334994178801393633840696468538590608460188 % 3570742878266991327359158 == 2206460438251553197958684
            and -11549406513527218067234541130484962628546223255136149411125647759120987122539549694129186006 % 3008420194676112150922185 == 446756410115394084081114
            and -863736662068862592365913266304084994237649161858487180 % 8842940129836132426121025444283844523033735993 == 8821998256144802060095514807593826496771337846
    }

    "power": {
        1692982^9 == 114253908553460453488480252762706825187694461454089221632
            and (-1273130)^34 == 3678523770653210195261274034501038612320347779981005788973206242264957225904197952115244709472318384466535985026213427788867489361182665363055112741139663892988020881435170890000000000000000000000000000000000
            and (-4041)^3 == -65988240921
            and (-2401)^94 == 571298449461337400416188793014900522579974657809817107529771078469319724868713208253671993135275166967129671122904086024431779048442619109309348175289913812746435157662908558169519913191643235657810512667545493950431916948674250688839231492090403358919281576134235095959967210135693033126220547281512215881747033185601
            and (-46724)^22 == 5368838445085552539775024307366165023824379499184833582828270021962842183994618059173781266655845810176
            and (-85161211)^48 == 448340290402804689383963532143223370690599654091850135714978757452515937302361458743717562302658042085903859526137985326260045435402311934367137466647460304791514849906799746102525980624083780619856213862533700591238881363933340448774219521984559931345983848644828182540429191270644609014212751953749539610370349126764216286542156990730387120723372337408189364464519332117140098881
            and (-32721)^14 == 1612768194020562676738463387694575225697145097655671560457744481
            and (-2094)^75 == -1183724947676791883518512651776807106937295685716786262318316493454453466525894380251442571457401364818559675017231512273133688711102254636120208918130182802496118649237067801337558749584024271948915888853972813909476267975781869663161743556030234624
            and 9684361^37 == 3052290699473325675548321636740158648602619734871060250223748031975702465024226929223782062225058872106958252661532836576337570063584337646057934180204227532032687542138434336911471216617801018676470992853912216951863967730993439661577473358105157269551834921
            and (-4496)^51 == -1968527248078427096093970048628843201988173798596839891413351679620145220468681991962862184449618752594264134630880128012208349144922635490154613675553008675743680434084939530048420970496
    }

    "shift (left)": {
        927<<-59 == 0
            and 87710587<<-89 == 0
            and 529968<<1 == 1059936
            and 31<<2 == 124
            and 782677<<-4 == 48917
            and 8948950<<-41 == 0
            and 33971<<91 == 84108122149127306637196298027008
            and 40<<46 == 2814749767106560
            and 5962<<38 == 1638822081200128
            and 5<<-93 == 0
    }

    "shift (right)": {
        8757>>-25 == 293836161024
            and 103824109>>-19 == 54433734459392
            and 236935794>>57 == 0
            and 6822413354>>-67 == 1006810504850371242098805440512
            and 99>>-96 == 7843588088912169421760851083264
            and 61523>>-98 == 19497416969460339367070417826086912
            and 291>>84 == 0
            and 4368>>79 == 0
            and 33720>>-36 == 2317220755537920
            and 3196979760>>-10 == 3273707274240
    }
}
